<!DOCTYPE html>
<html>
    <body>
        <script src="Organism.js"></script>
        <script src="GameWorld.js"></script>
        <button id="start-button" onclick="startGame()">Start</button>
        <br>
        <script>
            'use strict'
            
            //let gameArray = [];
            let gArr = new GameWorld;

            let p = new Plant(10,10);
            let hv = new Herbivore(28,28);
            let cv = new Carnivore(26,26);
            let p2 = new Plant(20,20);

            
            gArr.addOrganism(p);
            gArr.addOrganism(hv);
            gArr.addOrganism(cv);
            gArr.addOrganism(p2);

            function startGame(){            
                let timer = setInterval(() => {timeStep(); printGameWorld();}, 1000);
                setTimeout(() => clearInterval(timer), 5000);
            };
            
           // suorittaa time stepin kaikille taulukon olioille
           function timeStep(){
                for(let o of gArr){
                    o.performTimeStep(gArr); 
                            
                }
                gArr = gArr.filter(o => o.isAlive);
                
            }
            // printtaa ruudulle lista oloista
            function printGameWorld(){
                for(let o of gArr){
                    document.body.append(document.createTextNode(`species: ${o.constructor.name}, location: (${o.loc_x}, ${o.loc_y}), age: ${o.age}, alive: ${o.isAlive}`));
                    document.body.append(document.createElement('br'));
                }
            }
            
            console.log(gArr);
        </script>
    </body>
</html>